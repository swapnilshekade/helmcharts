{{- if .Values.istio.enabled }}
apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: {{ include "rydercupva-graphql.fullname" . }}-dr
spec:
  host: {{ include "rydercupva-graphql.fullname" . }}-service
  trafficPolicy:
    tls:
      mode: {{ if .Values.istio.tls.selfSigned }}DISABLE{{ else }}ISTIO_MUTUAL{{ end }}
{{- end }}
